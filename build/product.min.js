var JSHelpers={ready:function(a,b,c){document.addEventListener?document.addEventListener("DOMContentLoaded",a.apply(b,c)):document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&a.apply(b,c)})},addEventListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent("on"+b,function(){c.call(a)})},simulateMouseEvent:function(a,b){if(document.createEvent){var c=new MouseEvent(b,{view:window,bubbles:!1,cancelable:!0});a.dispatchEvent(c)}else a.fireEvent("on"+b)},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},createNode:function(a){var b=document.createElement("div");b.innerHTML=a;var c=b.childNodes;return c[0]},setText:function(a,b){void 0!==a.textContent?a.textContent=b:a.innerText=b},createTable:function(a){var b="";return a.forEach(function(c,d){b=b+"<th>"+a[d]+"</th>"}),this.createNode("<table><thead>"+b+"</thead><tbody></tbody></table>")},indexOf:function(a){return indexOf="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b=-1,c=-1;for(b=0;b<this.length;b++)if(this[b]===a){c=b;break}return c},indexOf.call(this,a)},forEach:function(){},map:function(){}},keyboard=function(){function a(a){this.name=a.name||"",this.symbol=f[this.name]||this.name,this.x=a.x||0,this.y=a.y||0,this.width=a.width||0,this.height=a.height||0}function b(a){this.width=d,this.margin=e,this.keys=c(),this.height=function(a,b){return a.keys.forEach(function(c,d){b+=c[0].height,0!=d&&(b+=a.margin)}),b}(this,0),"generic"==a&&this.findKey("delete").convert("backspace")}function c(){function b(a,b){return 0==b||u[a]?s:b==g.length-1?2*s:k}function c(a,b){return 0==b?q:t[a]||k}function f(a,b){return u[a]||b}function h(a,b){return u[a]&&"up"!=a?b+s:b}var i=d,j=e,k=(1-13.5*j)/14.5,l=1.5*k+.5*j,m=.5*(i-11*k-12*j),n=m+.5*k+.5*j,o=n-k-j,p=5*k+4*j,q=1/14*(i-13*j),r=k+j,s=.5*r,t={"delete":l,tab:l,"caps-lock":m,enter:m,shift:n,"super":o,spacebar:p},u={up:i-2*k-j,down:i-2*k-j,left:i-3*k-2*j,right:i-k},v=0,w=0;return g.map(function(d,e){return v=0,w+=0==e?0:b(d[0],e-1)+j,d.map(function(d,g,i){return v+=0==g?0:c(i[g-1],e)+j,new a({name:d,x:f(d,v),y:h(d,w),width:c(d,e),height:b(d,e)})})})}var d=1,e=.01,f={escape:"esc",power:" ",backtick:"`",minus:"-",equals:"=","left-bracket":"[","right-bracket":"]","back-slash":"\\","forward-slash":"/",semicolon:";",comma:",",period:"."},g=[["escape","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","power"],["backtick","1","2","3","4","5","6","7","8","9","0","minus","equals","delete"],["tab","q","w","e","r","t","y","u","i","o","p","left-bracket","right-bracket","back-slash"],["caps-lock","a","s","d","f","g","h","j","k","l","semicolon","comma","enter"],["shift","z","x","c","v","b","n","m","comma","period","forward-slash","shift"],["fn","ctrl","alt","super","spacebar","super","alt","left","up","down","right"]];return a.prototype.convert=function(a,b){this.name=a,this.symbol=b||a},b.prototype.findKey=function(a){for(var b=0;b<this.keys.length;b++)for(var c=0;c<this.keys[b].length;c++)if(this.keys[b][c].name==a)return this.keys[b][c]},{build:function(a){return new b(a)}}}(),SHORTCUTS=[{title:"apple",shortcuts:[{keys:["super+shift+n"],command:"new_window",context:"Default"},{keys:["super+shift+w"],command:"close_window",context:"Default"},{keys:["super+o"],command:"prompt_open",context:"Default"},{keys:["super+shift+t"],command:"reopen_last_file",context:"Default"},{keys:["super+s"],command:"save",context:"Default"},{keys:["super+shift+s"],command:"prompt_save_as",context:"Default"},{keys:["super+alt+s"],command:"save_all",context:"Default"},{keys:["super+w"],command:"close",context:"Default"},{keys:["super+k","super+t","y","alt+k","super+k"],command:"fold_tag_attributes"}]},{title:"PC",shortcuts:[{keys:["super+shift+n"],command:"new_window",context:"Default"},{keys:["super+shift+w"],command:"close_window",context:"Default"},{keys:["super+o"],command:"prompt_open",context:"Default"},{keys:["super+shift+t"],command:"reopen_last_file",context:"Default"},{keys:["super+s"],command:"save",context:"Default"},{keys:["super+shift+s"],command:"prompt_save_as",context:"Default"},{keys:["super+alt+s"],command:"save_all",context:"Default"},{keys:["super+w"],command:"close",context:"Default"},{keys:["super+k","super+t","y","alt+k","super+k"],command:"fold_tag_attributes"}]}],htmlKeyboard=function(a){function b(){g=document.getElementById("keyboard-shortcuts-container"),h=a.createNode("<div id=keyboard-container></div>"),j=a.createNode("<div id='keyboard'></div>"),i=a.createNode("<div id='shortcuts-container'></div>"),g.appendChild(h),g.appendChild(i),h.appendChild(j)}function c(){function b(b){i=a.createNode("<div class='key-row'></div>"),i.style.height=b[0].height/e.height*100+"%",i.style.top=b[0].y/e.height*100+"%",j.appendChild(i)}function c(b,c){g=a.createNode("<button class='key'></button>"),g.setAttribute("id","key-"+b.name),g.style.left=100*b.x+"%",g.style.width=100*b.width+"%",a.setText(g,b.symbol),"up"==b.name||"down"==b.name||"left"==b.name||"right"==b.name?(g.style.height="50%",g.style.top="up"==b.name?"0":"50%"):("shift"==b.name||"alt"==b.name||"super"==b.name)&&(5>c?g.setAttribute("id",g.id+"-left"):g.setAttribute("id",g.id+"-right")),i.appendChild(g),a.addEventListener(g,"mouseover",d),a.addEventListener(g,"mouseout",f)}function d(){a.addClass(this,"key-highlight")}function f(){a.removeClass(this,"key-highlight")}var g,i;h.style.paddingBottom=100*e.height+"%",e.keys.forEach(function(a){b(a),a.forEach(function(a,b){c(a,b)})}),h.appendChild(j)}function d(){function b(a){g=document.createElement("TR"),e.appendChild(g),h=document.createElement("TD"),h.appendChild(document.createTextNode(a.keys)),g.appendChild(h),h=document.createElement("TD"),h.appendChild(document.createTextNode(a.command)),g.appendChild(h),h=document.createElement("TD"),a.context&&h.appendChild(document.createTextNode(a.context)),g.appendChild(h)}function c(b){function c(b){b.forEach(function(b){a.simulateMouseEvent(document.getElementById(b),"mouseover")})}function d(b,c){b.forEach(function(b){c?-1==a.indexOf.call(c,b)&&a.simulateMouseEvent(document.getElementById(b),"mouseout"):a.simulateMouseEvent(document.getElementById(b),"mouseout")})}var e,f,h={shift:null,"super":null,alt:null},i=b.keys.map(function(a){return a.split("+").map(function(a){return"key-"+a+(h.hasOwnProperty(a)?"-left":"")})});i.length>1?(e=0,i.push([]),a.addEventListener(g,"mouseover",function(){f=setInterval(function(){for(var a=0;a<i.length;a++)a==e?c(i[a]):d(i[a],i[e]);e==i.length-1?e=0:++e},400)})):a.addEventListener(g,"mouseover",function(){c(i[0])}),a.addEventListener(g,"mouseout",function(){i.forEach(function(a){d(a)}),e=0,clearTimeout(f)})}var d,e,g,h;f.forEach(function(f){d=a.createTable(["Shortcut","Command","Context"]),i.appendChild(d),e=d.lastElementChild,f.shortcuts.forEach(function(a){b(a),c(a,g)})})}var e,f,g,h,i,j;return{init:function(a,g){e=a,f=g,b(),c(),d()}}}(JSHelpers);JSHelpers.ready(htmlKeyboard.init,htmlKeyboard,[keyboard.build("generic"),SHORTCUTS]);